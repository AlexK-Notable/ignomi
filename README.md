# Ignomi - Three-Panel Application Launcher

![Status](https://img.shields.io/badge/status-in%20development-yellow)
![Platform](https://img.shields.io/badge/platform-Wayland-blue)
![Framework](https://img.shields.io/badge/framework-Ignis-purple)

A three-panel application launcher built with [Ignis](https://github.com/linkfrg/ignis) for Wayland compositors (Hyprland, Sway, Niri).

## Features

- ðŸŽ¯ **Three Interactive Panels**
  - Left: Bookmarked apps (customizable favorites)
  - Center: Search panel (filter all installed apps)
  - Right: Frequent apps (auto-ranked by usage)

- ðŸ“Œ **Dynamic Bookmarks**
  - Right-click to add/remove apps
  - Drag-and-drop to reorder
  - Persists across sessions

- ðŸ§  **Smart Frecency**
  - Firefox-style algorithm (frequency Ã— recency)
  - Learns your usage patterns over time
  - Time-weighted rankings (recent apps rank higher)

- ðŸŽ¨ **Wallust Integration**
  - Colors automatically match your wallpaper
  - Dynamic theme updates when wallpaper changes
  - GTK4 CSS styling

- âš¡ **Fast & Lightweight**
  - Python + GTK4 + Wayland Layer Shell
  - Sub-100ms launch time
  - Minimal memory footprint

## Why Ignomi?

**Problem:** The previous launcher used GTK4 panels + Rofi, but Rofi's global pointer grab made the side panels unclickable.

**Solution:** Ignis provides all three panels under one process, eliminating pointer grab conflicts and enabling true multi-panel interaction.

## Installation

### Prerequisites

```bash
# Arch Linux / CachyOS
sudo pacman -S python python-gobject gtk4 python-pipx

# Wallust for dynamic colors (optional but recommended)
# Install from AUR or https://github.com/devora-garb/wallust
```

### Install Ignis

```bash
# Clone this repository
git clone <your-repo-url> ~/repos/ignomi
cd ~/repos/ignomi

# Install Ignis framework
pipx install ./ignis

# Verify installation
ignis --version
```

### Setup Launcher

```bash
# Create Ignis config symlink
mkdir -p ~/.config/ignis
ln -s ~/repos/ignomi/launcher/config.py ~/.config/ignis/config.py

# Create colors symlink (after Wallust setup)
mkdir -p ~/.config/ignomi/styles
ln -s ~/.config/ignomi/colors.css ~/repos/ignomi/launcher/styles/colors.css
```

### Hyprland Keybinding

Add to `~/.config/hypr/config/keybinds.conf`:

```conf
bindd = $mainMod, SPACE, Launch Ignomi three-panel launcher, exec, ignis open-window ignomi
```

## Usage

### Basic Operations

- **Open Launcher:** Press `Mod+Space` (or your configured keybind)
- **Search Apps:** Start typing in the center panel
- **Launch App:** Click any app from any panel
- **Close:** Press `Escape` or wait for auto-close (0.3s after launch)

### Managing Bookmarks

- **Add to Bookmarks:** Right-click app in search/frequent panels
- **Remove from Bookmarks:** Right-click app in bookmarks panel
- **Reorder Bookmarks:** Drag-and-drop apps in bookmarks panel

### Manual Frecency Tracking

Track apps launched outside the launcher:

```bash
# Track a specific app
~/repos/ignomi/scripts/track-launch.sh firefox.desktop
```

## Configuration

### Panel Settings

Edit `launcher/data/settings.toml`:

```toml
[launcher]
close_delay_ms = 300  # Auto-close delay after launch

[panels]
bookmark_width = 300
frequent_width = 300
search_width = 500
search_height = 600

[frecency]
max_items = 12  # Apps shown in frequent panel
min_launches = 2  # Minimum launches before showing
```

### Initial Bookmarks

Edit `launcher/data/bookmarks.json`:

```json
{
  "bookmarks": [
    "firefox.desktop",
    "Alacritty.desktop",
    "code.desktop"
  ]
}
```

### Wallust Color Theme

Create template at `~/.config/wallust/templates/ignomi.css`:

```css
@define-color bg {{background}};
@define-color fg {{foreground}};
@define-color accent {{color3}};
@define-color success {{color2}};
@define-color warning {{color1}};
@define-color error {{color5}};
```

Update `~/.config/wallust/wallust.toml`:

```toml
[templates]
ignomi_colors = {
    template = "ignomi.css",
    target = "/home/<your-username>/.config/ignomi/colors.css"
}
```

## Project Structure

```
ignomi/
â”œâ”€â”€ ignis/                   # Ignis framework (git submodule)
â”œâ”€â”€ launcher/                # Launcher implementation
â”‚   â”œâ”€â”€ config.py            # Main Ignis entry point
â”‚   â”œâ”€â”€ panels/              # Panel implementations
â”‚   â”‚   â”œâ”€â”€ bookmarks.py     # Bookmarks panel
â”‚   â”‚   â”œâ”€â”€ search.py        # Search panel
â”‚   â”‚   â””â”€â”€ frequent.py      # Frequent apps panel
â”‚   â”œâ”€â”€ services/            # Backend services
â”‚   â”‚   â””â”€â”€ frecency.py      # Frecency tracking
â”‚   â”œâ”€â”€ widgets/             # Reusable UI components
â”‚   â”œâ”€â”€ utils/               # Helper functions
â”‚   â”œâ”€â”€ data/                # Configuration files
â”‚   â”‚   â”œâ”€â”€ bookmarks.json
â”‚   â”‚   â””â”€â”€ settings.toml
â”‚   â””â”€â”€ styles/              # CSS styling
â”‚       â”œâ”€â”€ main.css
â”‚       â””â”€â”€ colors.css       # Generated by Wallust
â”œâ”€â”€ scripts/                 # Utility scripts
â”‚   â””â”€â”€ track-launch.sh      # Manual frecency tracking
â”œâ”€â”€ project-docs/            # Documentation
â””â”€â”€ README.md
```

## Development

### Running in Dev Mode

```bash
# Test launcher
ignis open-window ignomi

# Reload after changes
ignis reload

# View logs
journalctl -f | grep ignis
```

### Testing Checklist

See `project-docs/2025-11-02-ignomi-launcher-design.md` for comprehensive testing strategy.

## Troubleshooting

### Launcher doesn't appear

```bash
# Check if Ignis is running
ps aux | grep ignis

# Check Ignis logs
journalctl --user -u ignis

# Verify keybinding
hyprctl binds | grep ignomi
```

### Panels overlap incorrectly

Check monitor configuration in `config.py`:

```python
Widget.Window(
    namespace="ignomi-bookmarks",
    monitor=0,  # Change to your primary monitor index
    ...
)
```

### Frecency not updating

```bash
# Check database exists
ls -la ~/.local/share/ignomi/app_usage.db

# Manually test tracking
~/repos/ignomi/scripts/track-launch.sh firefox.desktop
```

### Colors not updating

```bash
# Regenerate Wallust colors
wallust run ~/.config/wallust/wallpapers/current.png

# Check symlink
ls -la ~/repos/ignomi/launcher/styles/colors.css
```

## Architecture

Ignomi uses a modular architecture with clear separation of concerns:

- **Panels:** UI windows (bookmarks, search, frequent)
- **Services:** Backend logic (frecency tracking, app discovery)
- **Widgets:** Reusable UI components
- **Utils:** Shared helper functions

All panels communicate through GObject signals for reactive updates.

See `project-docs/2025-11-02-ignomi-launcher-design.md` for detailed architecture documentation.

## Contributing

This is a personal project, but suggestions and bug reports are welcome via GitHub issues.

## License

[MIT License](LICENSE)

## Credits

- [Ignis Framework](https://github.com/linkfrg/ignis) - Widget system and Wayland integration
- [IgnisNiriShell](https://github.com/lost-melody/IgnisNiriShell) - Inspiration for app launcher
- [Wallust](https://github.com/devora-garb/wallust) - Dynamic color generation
- Firefox Frecency Algorithm - Usage ranking approach

## Related Projects

- [Rofi](https://github.com/davatorium/rofi) - Traditional launcher (incompatible with multi-panel)
- [Walker](https://github.com/abenz1267/walker) - Alternative Wayland launcher
- [Exo](https://github.com/debuggyo/Exo) - Full Ignis desktop shell

---

**Status:** In Development
**Version:** 0.1.0-dev
**Platform:** Linux (Wayland)
**Compositor Tested:** Hyprland

For detailed design decisions and implementation notes, see `project-docs/`.
